<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Favicon -->
    <link href="src/assets/img/favicon.png" rel="icon" type="image/png" />

    <!-- Title and description -->
    <title>Socialite - Social Media Platform</title>
    <meta
      name="description"
      content="Socialite - Dynamic Social Media Platform"
    />

    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="src/assets/css/styles.css" />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Ionicons -->
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>
  </head>
  <body class="bg-gray-50 dark:bg-gray-900 font-inter">
    <!-- Loading Spinner -->
    <div
      id="loadingSpinner"
      class="fixed inset-0 bg-white dark:bg-gray-900 z-50 flex items-center justify-center"
    >
      <div
        class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"
      ></div>
    </div>

    <div id="wrapper" class="hidden">
      <!-- Header -->
      <header
        class="fixed top-0 left-0 w-full z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-b border-gray-200 dark:border-gray-800 h-16"
      >
        <div
          class="flex items-center w-full px-4 xl:px-6 h-full max-w-7xl mx-auto"
        >
          <!-- Left Section -->
          <div class="flex items-center gap-4 flex-1">
            <!-- Logo -->
            <div class="flex items-center">
              <a href="/" class="flex items-center gap-2">
                <div
                  class="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center"
                >
                  <span class="text-white font-bold text-lg">S</span>
                </div>
                <span
                  class="text-xl font-bold text-gray-900 dark:text-white hidden sm:block"
                  >Socialite</span
                >
              </a>
            </div>

            <!-- Search -->
            <div class="flex-1 max-w-xl">
              <div class="relative">
                <ion-icon
                  name="search"
                  class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"
                ></ion-icon>
                <input
                  type="text"
                  id="searchInput"
                  placeholder="Search friends, posts..."
                  class="w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-800 border-0 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-gray-900 dark:text-white"
                />
              </div>
            </div>
          </div>

          <!-- Right Section -->
          <div class="flex items-center gap-4">
            <!-- Notifications -->
            <button
              id="notificationsBtn"
              class="relative p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"
            >
              <ion-icon name="notifications-outline" class="w-6 h-6"></ion-icon>
              <span
                id="notificationBadge"
                class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden"
                >0</span
              >
            </button>

            <!-- Messages -->
            <button
              id="messagesBtn"
              class="relative p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"
            >
              <ion-icon name="chatbubble-outline" class="w-6 h-6"></ion-icon>
              <span
                id="messageBadge"
                class="absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden"
                >0</span
              >
            </button>

            <!-- User Menu -->
            <div class="relative" id="userMenu">
              <button
                id="userMenuBtn"
                class="flex items-center gap-2 p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800"
              >
                <img
                  id="userAvatar"
                  src="src/assets/img/default-avatar.png"
                  alt="User"
                  class="w-8 h-8 rounded-full object-cover"
                />
                <ion-icon
                  name="chevron-down"
                  class="w-4 h-4 text-gray-600 dark:text-gray-400"
                ></ion-icon>
              </button>

              <!-- Dropdown Menu -->
              <div
                id="userDropdown"
                class="absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 hidden"
              >
                <div class="py-2">
                  <a
                    href="#"
                    class="flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <ion-icon name="person-outline"></ion-icon>
                    Profile
                  </a>
                  <a
                    href="#"
                    class="flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <ion-icon name="settings-outline"></ion-icon>
                    Settings
                  </a>
                  <hr class="my-2 border-gray-200 dark:border-gray-700" />
                  <button
                    id="logoutBtn"
                    class="w-full flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20"
                  >
                    <ion-icon name="log-out-outline"></ion-icon>
                    Logout
                  </button>
                </div>
              </div>
            </div>

            <!-- Login Button (shown when not authenticated) -->
            <button
              id="loginBtn"
              class="hidden bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors"
            >
              Login
            </button>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="pt-20 min-h-screen">
        <div class="max-w-6xl mx-auto px-4 py-6">
          <!-- Welcome Section -->
          <div
            id="welcomeSection"
            class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6"
          >
            <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">
              Welcome to Socialite
            </h1>
            <p class="text-gray-600 dark:text-gray-400">
              Connect with friends, share your thoughts, and discover amazing
              content.
            </p>
          </div>

          <!-- Create Post Section (for authenticated users) -->
          <div
            id="createPostSection"
            class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6 hidden"
          >
            <div class="flex items-start gap-4">
              <img
                id="createPostAvatar"
                src="src/assets/img/default-avatar.png"
                alt="Your avatar"
                class="w-10 h-10 rounded-full object-cover"
              />
              <div class="flex-1">
                <textarea
                  id="postContent"
                  placeholder="What's on your mind?"
                  class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none focus:ring-2 focus:ring-blue-500 focus:outline-none"
                  rows="3"
                ></textarea>
                <div class="flex items-center justify-between mt-4">
                  <div class="flex items-center gap-4">
                    <button
                      type="button"
                      class="flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-blue-500"
                    >
                      <ion-icon name="image-outline"></ion-icon>
                      Photo
                    </button>
                    <button
                      type="button"
                      class="flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-blue-500"
                    >
                      <ion-icon name="videocam-outline"></ion-icon>
                      Video
                    </button>
                  </div>
                  <button
                    id="postBtn"
                    class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"
                    disabled
                  >
                    Post
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Posts Feed -->
          <div id="postsContainer" class="space-y-6">
            <!-- Posts will be loaded here dynamically -->
            <div class="text-center py-8">
              <div class="animate-pulse">
                <div
                  class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-32 mx-auto mb-2"
                ></div>
                <div
                  class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-48 mx-auto"
                ></div>
              </div>
            </div>
          </div>

          <!-- Load More Button -->
          <div id="loadMoreContainer" class="text-center mt-8 hidden">
            <button
              id="loadMoreBtn"
              class="bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
            >
              Load More Posts
            </button>
          </div>
        </div>
      </main>

      <!-- Footer -->
      <footer
        class="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-8"
      >
        <div class="max-w-6xl mx-auto px-4">
          <div class="text-center text-gray-600 dark:text-gray-400">
            <p>&copy; 2025 Socialite. All rights reserved.</p>
          </div>
        </div>
      </footer>
    </div>

    <!-- Login Modal -->
    <div
      id="loginModal"
      class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden"
    >
      <div
        class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md mx-4"
      >
        <div class="p-6">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold text-gray-900 dark:text-white">
              Login to Socialite
            </h2>
            <button
              id="closeLoginModal"
              class="text-gray-400 hover:text-gray-600"
            >
              <ion-icon name="close" class="w-6 h-6"></ion-icon>
            </button>
          </div>

          <form id="loginForm" class="space-y-4">
            <div>
              <label
                for="email"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                >Email</label
              >
              <input
                type="email"
                id="email"
                required
                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"
              />
            </div>

            <div>
              <label
                for="password"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                >Password</label
              >
              <input
                type="password"
                id="password"
                required
                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"
              />
            </div>

            <div id="loginError" class="text-red-500 text-sm hidden"></div>

            <button
              type="submit"
              class="w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"
            >
              <span id="loginBtnText">Login</span>
              <span id="loginSpinner" class="hidden">
                <div
                  class="animate-spin rounded-full h-4 w-4 border-b-2 border-white inline-block"
                ></div>
              </span>
            </button>
          </form>

          <div class="mt-4 text-center">
            <div class="bg-blue-50 dark:bg-blue-900/30 p-3 rounded-lg mb-4">
              <p
                class="text-sm text-blue-700 dark:text-blue-300 font-medium mb-1"
              >
                Demo Credentials:
              </p>
              <p class="text-xs text-blue-600 dark:text-blue-400">
                Email: <strong>john@example.com</strong><br />
                Email: <strong>jane@example.com</strong><br />
                Password: <strong>password123</strong>
              </p>
            </div>
            <p class="text-gray-600 dark:text-gray-400">
              Don't have an account?
              <a
                href="#"
                id="showRegisterModal"
                class="text-blue-500 hover:text-blue-600"
                >Sign up</a
              >
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="src/assets/js/main.js"></script>

    <!-- Quick authentication check -->
    <script>
      // Show login modal immediately if no token found
      document.addEventListener("DOMContentLoaded", () => {
        const token = localStorage.getItem("socialite_token");
        if (!token) {
          setTimeout(() => {
            const loginModal = document.getElementById("loginModal");
            if (loginModal && typeof app !== "undefined") {
              console.log("No authentication found, showing login modal");
              app.showLoginModal();
            }
          }, 1000); // Give the app time to initialize
        }
      });
    </script>
  </body>
</html>
