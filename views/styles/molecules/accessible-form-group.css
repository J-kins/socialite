/**
 * AccessibleFormGroup Molecule Styles
 * Accessible form field group styling
 */

.accessible-form-group {
  @apply flex flex-col gap-1 mb-4;
}

.accessible-form-group .form-label {
  @apply block text-sm font-medium text-gray-700 mb-1;
}

.accessible-form-group .form-label.required::after {
  content: " *";
  @apply text-red-500;
}

.accessible-form-group .form-input {
  @apply w-full px-3 py-2 border border-gray-300 rounded-md;
  @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500;
  @apply transition-all duration-200;
}

.accessible-form-group .form-help {
  @apply text-xs text-gray-500 mt-1;
}

.accessible-form-group .form-error {
  @apply text-xs text-red-600 mt-1 flex items-center gap-1;
}

.accessible-form-group .form-error .error-icon {
  @apply w-4 h-4 flex-shrink-0;
}

/* Error state */
.accessible-form-group.has-error .form-input {
  @apply border-red-500 ring-2 ring-red-500 focus:ring-red-500 focus:border-red-500;
}

.accessible-form-group.has-error .form-label {
  @apply text-red-700;
}

/* Success state */
.accessible-form-group.has-success .form-input {
  @apply border-green-500 ring-2 ring-green-500 focus:ring-green-500 focus:border-green-500;
}

.accessible-form-group.has-success .form-label {
  @apply text-green-700;
}

.accessible-form-group.has-success .form-success {
  @apply text-xs text-green-600 mt-1 flex items-center gap-1;
}

.accessible-form-group.has-success .success-icon {
  @apply w-4 h-4 flex-shrink-0;
}

/* Warning state */
.accessible-form-group.has-warning .form-input {
  @apply border-yellow-500 ring-2 ring-yellow-500 focus:ring-yellow-500 focus:border-yellow-500;
}

.accessible-form-group.has-warning .form-label {
  @apply text-yellow-700;
}

.accessible-form-group.has-warning .form-warning {
  @apply text-xs text-yellow-600 mt-1 flex items-center gap-1;
}

.accessible-form-group.has-warning .warning-icon {
  @apply w-4 h-4 flex-shrink-0;
}

/* Disabled state */
.accessible-form-group.disabled {
  @apply opacity-60;
}

.accessible-form-group.disabled .form-input {
  @apply bg-gray-100 cursor-not-allowed;
}

.accessible-form-group.disabled .form-label {
  @apply text-gray-500;
}

/* Size variants */
.accessible-form-group.form-group--small .form-label {
  @apply text-xs;
}

.accessible-form-group.form-group--small .form-input {
  @apply px-2 py-1.5 text-sm;
}

.accessible-form-group.form-group--large .form-label {
  @apply text-base;
}

.accessible-form-group.form-group--large .form-input {
  @apply px-4 py-3 text-lg;
}

/* Input variants */
.accessible-form-group .form-input[type="textarea"] {
  @apply min-h-[80px] resize-vertical;
}

.accessible-form-group .form-input[type="email"] {
  @apply lowercase;
}

.accessible-form-group .form-input[type="url"] {
  @apply lowercase;
}

.accessible-form-group .form-input[type="tel"] {
  @apply font-mono;
}

/* Floating label variant */
.accessible-form-group.form-group--floating {
  @apply relative;
}

.accessible-form-group.form-group--floating .form-label {
  @apply absolute left-3 top-3 text-gray-500 transition-all duration-200;
  @apply pointer-events-none bg-white px-1;
}

.accessible-form-group.form-group--floating .form-input:focus + .form-label,
.accessible-form-group.form-group--floating
  .form-input:not(:placeholder-shown)
  + .form-label {
  @apply transform -translate-y-6 scale-75 text-blue-600;
}

.accessible-form-group.form-group--floating.has-error
  .form-input:focus
  + .form-label {
  @apply text-red-600;
}

/* Input group with icon */
.accessible-form-group.form-group--with-icon {
  @apply relative;
}

.accessible-form-group.form-group--with-icon .form-icon {
  @apply absolute left-3 top-9 w-5 h-5 text-gray-400 pointer-events-none;
}

.accessible-form-group.form-group--with-icon .form-input {
  @apply pl-10;
}

.accessible-form-group.form-group--with-icon.icon-right .form-icon {
  @apply left-auto right-3;
}

.accessible-form-group.form-group--with-icon.icon-right .form-input {
  @apply pl-3 pr-10;
}

/* Character counter */
.accessible-form-group .form-counter {
  @apply text-xs text-gray-500 mt-1 text-right;
}

.accessible-form-group .form-counter.counter-warning {
  @apply text-yellow-600;
}

.accessible-form-group .form-counter.counter-error {
  @apply text-red-600;
}

/* Input addon */
.accessible-form-group .input-group {
  @apply flex;
}

.accessible-form-group .input-addon {
  @apply px-3 py-2 bg-gray-50 border border-gray-300 text-gray-500;
  @apply first:rounded-l-md first:border-r-0 last:rounded-r-md last:border-l-0;
}

.accessible-form-group .input-group .form-input {
  @apply rounded-none border-x-0 flex-1;
}

.accessible-form-group .input-group .form-input:first-child {
  @apply rounded-l-md border-l border-r-0;
}

.accessible-form-group .input-group .form-input:last-child {
  @apply rounded-r-md border-r border-l-0;
}

/* Inline variant */
.accessible-form-group.form-group--inline {
  @apply flex items-center gap-4 mb-2;
}

.accessible-form-group.form-group--inline .form-label {
  @apply mb-0 whitespace-nowrap;
}

.accessible-form-group.form-group--inline .form-input {
  @apply flex-1;
}

/* Loading state */
.accessible-form-group.form-group--loading .form-input {
  @apply opacity-60 pointer-events-none;
}

.accessible-form-group.form-group--loading::after {
  content: "";
  @apply absolute right-3 top-9 w-5 h-5 border-2 border-gray-300 border-t-blue-600;
  @apply rounded-full animate-spin;
}

.accessible-form-group.form-group--loading {
  @apply relative;
}

/* Required indicator styles */
.accessible-form-group .form-label .required-indicator {
  @apply text-red-500 ml-1;
}

.accessible-form-group .form-label .optional-indicator {
  @apply text-gray-400 ml-1 text-xs;
}

/* Screen reader only content */
.accessible-form-group .sr-only {
  @apply absolute w-px h-px p-0 -m-px overflow-hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Focus management */
.accessible-form-group .form-input:focus {
  @apply z-10 relative;
}

/* Mobile responsive */
@media (max-width: 640px) {
  .accessible-form-group.form-group--inline {
    @apply flex-col items-start gap-1;
  }

  .accessible-form-group.form-group--inline .form-label {
    @apply w-full;
  }

  .accessible-form-group .form-input {
    @apply text-base; /* Prevent zoom on iOS */
  }

  .accessible-form-group.form-group--with-icon .form-icon {
    @apply top-8;
  }
}

/* Touch devices */
@media (pointer: coarse) {
  .accessible-form-group .form-input {
    @apply py-3 min-h-[48px];
  }

  .accessible-form-group.form-group--small .form-input {
    @apply py-2 min-h-[40px];
  }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .accessible-form-group .form-label {
    @apply text-gray-300;
  }

  .accessible-form-group .form-input {
    @apply bg-gray-800 border-gray-600 text-gray-100;
    @apply focus:border-blue-400 focus:ring-blue-400;
  }

  .accessible-form-group .form-help {
    @apply text-gray-400;
  }

  .accessible-form-group.disabled .form-input {
    @apply bg-gray-900;
  }

  .accessible-form-group .input-addon {
    @apply bg-gray-800 border-gray-600 text-gray-400;
  }

  .accessible-form-group.form-group--floating .form-label {
    @apply bg-gray-800;
  }
}

/* High contrast mode */
@media (prefers-contrast: high) {
  .accessible-form-group .form-input {
    @apply border-2 border-black;
  }

  .accessible-form-group .form-input:focus {
    @apply ring-4 ring-blue-600;
  }

  .accessible-form-group .form-label {
    @apply text-black font-bold;
  }

  .accessible-form-group.has-error .form-input {
    @apply ring-4 ring-red-600;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .accessible-form-group .form-input {
    @apply transition-none;
  }

  .accessible-form-group.form-group--floating .form-label {
    @apply transition-none;
  }

  .accessible-form-group.form-group--loading::after {
    @apply animate-none;
  }
}

/* Print styles */
@media print {
  .accessible-form-group .form-help {
    @apply hidden;
  }

  .accessible-form-group .form-error,
  .accessible-form-group .form-warning,
  .accessible-form-group .form-success {
    @apply hidden;
  }

  .accessible-form-group .form-counter {
    @apply hidden;
  }
}
