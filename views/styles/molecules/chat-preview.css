/**
 * ChatPreview Molecule Styles
 * Chat conversation preview styling
 */

.chat-preview {
  @apply flex items-center gap-3 px-4 py-3 hover:bg-gray-50 cursor-pointer transition-colors duration-200;
  @apply border-b border-gray-100 last:border-b-0;
}

.chat-preview:focus {
  @apply bg-gray-50 outline-none ring-2 ring-blue-500 ring-inset;
}

.chat-preview.chat-preview--active {
  @apply bg-blue-50 border-blue-200;
}

.chat-preview.chat-preview--unread {
  @apply bg-blue-50/50;
}

/* Avatar styling */
.chat-preview .chat-avatar {
  @apply flex-shrink-0 relative;
}

/* Online status indicator */
.chat-preview .chat-avatar::after {
  content: "";
  @apply absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-white rounded-full;
}

.chat-preview.chat-preview--offline .chat-avatar::after {
  @apply bg-gray-400;
}

.chat-preview.chat-preview--away .chat-avatar::after {
  @apply bg-yellow-500;
}

/* Content area */
.chat-preview-content {
  @apply flex-1 min-w-0;
}

.chat-preview .chat-name {
  @apply font-medium text-gray-900 truncate;
}

.chat-preview .chat-message {
  @apply text-sm text-gray-600 truncate mt-0.5;
  @apply max-w-full;
}

.chat-preview.chat-preview--unread .chat-message {
  @apply font-medium text-gray-800;
}

/* Meta information */
.chat-preview .chat-meta {
  @apply flex-shrink-0 text-right;
}

.chat-preview .chat-time {
  @apply text-xs text-gray-500 block;
}

.chat-preview .chat-badge {
  @apply mt-1;
}

/* Typing indicator */
.chat-preview.chat-preview--typing .chat-message {
  @apply text-blue-600 italic;
}

.chat-preview.chat-preview--typing .chat-message::after {
  content: "";
  @apply inline-block w-1 h-1 bg-blue-600 rounded-full ml-1;
  animation: typing 1.4s infinite;
}

@keyframes typing {
  0%,
  60%,
  100% {
    @apply opacity-100;
  }
  30% {
    @apply opacity-50;
  }
}

/* Message type indicators */
.chat-preview .message-type-icon {
  @apply inline-flex items-center mr-1 text-gray-400;
}

.chat-preview .message-type-icon.photo {
  @apply text-green-500;
}

.chat-preview .message-type-icon.video {
  @apply text-blue-500;
}

.chat-preview .message-type-icon.document {
  @apply text-yellow-500;
}

/* Pinned conversations */
.chat-preview.chat-preview--pinned {
  @apply bg-yellow-50 border-yellow-200;
}

.chat-preview.chat-preview--pinned::before {
  content: "";
  @apply absolute left-1 top-1 w-2 h-2 bg-yellow-500 rounded-full;
}

.chat-preview {
  @apply relative;
}

/* Muted conversations */
.chat-preview.chat-preview--muted {
  @apply opacity-60;
}

.chat-preview.chat-preview--muted .chat-badge {
  @apply hidden;
}

/* Group chat indicators */
.chat-preview.chat-preview--group .chat-avatar {
  @apply relative;
}

.chat-preview.chat-preview--group .chat-avatar::before {
  content: "";
  @apply absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center;
  content: attr(data-member-count);
}

/* Mobile responsive */
@media (max-width: 640px) {
  .chat-preview {
    @apply px-3 py-2;
  }

  .chat-preview .chat-time {
    @apply hidden;
  }

  .chat-preview .chat-message {
    @apply text-xs;
  }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .chat-preview {
    @apply hover:bg-gray-800 border-gray-700;
  }

  .chat-preview:focus {
    @apply bg-gray-800;
  }

  .chat-preview.chat-preview--active {
    @apply bg-blue-900/30 border-blue-800;
  }

  .chat-preview.chat-preview--unread {
    @apply bg-blue-900/20;
  }

  .chat-preview .chat-name {
    @apply text-gray-100;
  }

  .chat-preview .chat-message {
    @apply text-gray-300;
  }
}

/* High contrast mode */
@media (prefers-contrast: high) {
  .chat-preview:focus {
    @apply ring-4 ring-blue-600;
  }

  .chat-preview .chat-avatar::after {
    @apply border-4;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .chat-preview {
    @apply transition-none;
  }

  .chat-preview.chat-preview--typing .chat-message::after {
    animation: none;
  }
}
